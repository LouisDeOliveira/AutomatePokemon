from enum import Enum, auto
import re
import numpy as np


class PokemonType(Enum):
    normal = auto()
    fire = auto()
    water = auto()
    electric = auto()
    grass = auto()
    ice = auto()
    fighting = auto()
    poison = auto()
    ground = auto()
    flying = auto()
    psychic = auto()
    bug = auto()
    rock = auto()
    ghost = auto()
    dragon = auto()
    dark = auto()
    steel = auto()
    fairy = auto()


class TypeUtils:
    colours = {
        "normal": "#A8A77A",
        "fire": "#EE81.30",
        "water": "#6390F0",
        "electric": "#F7D02.C",
        "grass": "#7AC74C",
        "ice": "#96D9D6",
        "fighting": "#C2.2.E2.8",
        "poison": "#A33EA1.",
        "ground": "#E2.BF65",
        "flying": "#A98FF3",
        "psychic": "#F95587",
        "bug": "#A6B91.A",
        "rock": "#B6A1.36",
        "ghost": "#735797",
        "dragon": "#6F35FC",
        "dark": "#705746",
        "steel": "#B7B7CE",
        "fairy": "#D685AD",
    }

    strength_matrix = np.array(
        [
            [
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                0.5,
                0,
                1.0,
                1.0,
                0.5,
                1.0,
            ],
            [
                1.0,
                0.5,
                0.5,
                1.0,
                2.0,
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                0.5,
                1.0,
                0.5,
                1.0,
                2.0,
                1.0,
            ],
            [
                1.0,
                2.0,
                0.5,
                1.0,
                0.5,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                1.0,
                1.0,
                1.0,
            ],
            [
                1.0,
                1.0,
                2.0,
                0.5,
                0.5,
                1.0,
                1.0,
                1.0,
                0,
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                0.5,
                1.0,
                1.0,
                1.0,
            ],
            [
                1.0,
                0.5,
                2.0,
                1.0,
                0.5,
                1.0,
                1.0,
                0.5,
                2.0,
                0.5,
                1.0,
                0.5,
                2.0,
                1.0,
                0.5,
                1.0,
                0.5,
                1.0,
            ],
            [
                1.0,
                0.5,
                0.5,
                1.0,
                2.0,
                0.5,
                1.0,
                1.0,
                2.0,
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                1.0,
            ],
            [
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                1.0,
                0.5,
                0.5,
                0.5,
                2.0,
                0,
                1.0,
                2.0,
                2.0,
                0.5,
            ],
            [
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                1.0,
                0.5,
                0.5,
                1.0,
                1.0,
                1.0,
                0.5,
                0.5,
                1.0,
                1.0,
                0,
                2.0,
            ],
            [
                1.0,
                2.0,
                1.0,
                2.0,
                0.5,
                1.0,
                1.0,
                2.0,
                1.0,
                0,
                1.0,
                0.5,
                2.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
            ],
            [
                1.0,
                1.0,
                1.0,
                0.5,
                2.0,
                1.0,
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                0.5,
                1.0,
                1.0,
                1.0,
                0.5,
                1.0,
            ],
            [
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                2.0,
                1.0,
                1.0,
                0.5,
                1.0,
                1.0,
                1.0,
                1.0,
                0,
                0.5,
                1.0,
            ],
            [
                1.0,
                0.5,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                0.5,
                1.0,
                0.5,
                2.0,
                1.0,
                1.0,
                0.5,
                1.0,
                2.0,
                0.5,
                0.5,
            ],
            [
                1.0,
                2.0,
                1.0,
                1.0,
                1.0,
                2.0,
                0.5,
                1.0,
                0.5,
                2.0,
                1.0,
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                0.5,
                1.0,
            ],
            [
                0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                1.0,
                1.0,
            ],
            [
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                0,
            ],
            [
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                0.5,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                1.0,
                2.0,
                1.0,
                0.5,
                1.0,
                0.5,
            ],
            [
                1.0,
                0.5,
                0.5,
                0.5,
                1.0,
                2.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                1.0,
                1.0,
                1.0,
                0.5,
                2.0,
            ],
            [
                1.0,
                0.5,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                0.5,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                1.0,
                2.0,
                2.0,
                0.5,
                1.0,
            ],
        ]
    )

    @classmethod
    def get_score(cls, attacking: PokemonType, defending: PokemonType):
        return cls.strength_matrix[attacking.value - 1][defending.value - 1]
